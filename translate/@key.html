<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Web N·ªÅn T·ªëi</title>
    <style>
        body {
            background-color: #121212; /* M√†u n·ªÅn t·ªëi */
            color: #ffffff; /* M√†u ch·ªØ s√°ng */
            font-family: Arial, sans-serif;
            margin: 0;
            display: flex; /* S·ª≠ d·ª•ng flexbox ƒë·ªÉ t·∫°o layout */
            height: 100vh; /* Chi·ªÅu cao c·ªßa body b·∫±ng chi·ªÅu cao c·ªßa viewport */
        }
        .sidebar {
            width: 200px; /* Chi·ªÅu r·ªông c·ªßa sidebar */
            background-color: #1a1a1a; /* M√†u n·ªÅn t·ªëi h∆°n cho sidebar */
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5); /* ƒê·ªï b√≥ng cho sidebar */
            display: flex; /* S·ª≠ d·ª•ng flexbox cho sidebar */
            flex-direction: column; /* X·∫øp d·ªçc c√°c n√∫t */
        }
        .sidebar h2 {
            color: red; /* M√†u ch·ªØ ti√™u ƒë·ªÅ ƒë·ªè */
            border-bottom: 2px solid red; /* ƒê∆∞·ªùng k·∫ª d∆∞·ªõi ti√™u ƒë·ªÅ */
            padding-bottom: 10px; /* Kho·∫£ng c√°ch d∆∞·ªõi ti√™u ƒë·ªÅ */
        }
        .divider {
            width: 2px; /* ƒê·ªô d√†y c·ªßa ƒë∆∞·ªùng k·∫ª */
            background-color: red; /* M√†u c·ªßa ƒë∆∞·ªùng k·∫ª */
            height: 100vh; /* Chi·ªÅu cao c·ªßa ƒë∆∞·ªùng k·∫ª b·∫±ng chi·ªÅu cao c·ªßa viewport */
        }
        .content {
            flex: 1; /* N·ªôi dung ch√≠nh chi·∫øm ph·∫ßn c√≤n l·∫°i */
            padding: 20px;
            text-align: center; /* CƒÉn gi·ªØa n·ªôi dung */
            overflow-y: auto; /* Th√™m thanh cu·ªôn d·ªçc khi c·∫ßn thi·∫øt */
        }
        h1 {
            color: red; /* M√†u ch·ªØ ti√™u ƒë·ªÅ ƒë·ªè */
            border-bottom: 2px solid red; /* ƒê∆∞·ªùng k·∫ª d∆∞·ªõi ti√™u ƒë·ªÅ */
            padding-bottom: 10px; /* Kho·∫£ng c√°ch d∆∞·ªõi ti√™u ƒë·ªÅ */
        }
        p {
            color: #ffffff; /* M√†u ch·ªØ cho ƒëo·∫°n vƒÉn */
        }
        button {
            background-color: red; /* M√†u n·ªÅn c·ªßa n√∫t */
            color: white; /* M√†u ch·ªØ c·ªßa n√∫t */
            border: none; /* B·ªè vi·ªÅn */
            padding: 10px 15px; /* Kho·∫£ng c√°ch b√™n trong n√∫t */
            margin: 10px 5px; /* Kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
            cursor: pointer; /* Con tr·ªè chu·ªôt khi di chu·ªôt qua n√∫t */
            border-radius: 5px; /* Bo tr√≤n c√°c g√≥c c·ªßa n√∫t */
        }
        button:hover {
            background-color: darkred; /* M√†u n·ªÅn khi di chu·ªôt qua n√∫t */
        }
        table {
            width: 100%; /* Chi·ªÅu r·ªông c·ªßa b·∫£ng */
            border-collapse: collapse; /* B·ªè kho·∫£ng c√°ch gi·ªØa c√°c √¥ */
            margin-top: 20px; /* Kho·∫£ng c√°ch tr√™n b·∫£ng */
        }
        th, td {
            border: 1px solid red; /* Vi·ªÅn cho √¥ */
            padding: 10px; /* Kho·∫£ng c√°ch b√™n trong √¥ */
            text-align: left; /* CƒÉn tr√°i n·ªôi dung trong √¥ */
        }
        th {
            background-color: #1a1a1a; /* M√†u n·ªÅn cho ti√™u ƒë·ªÅ b·∫£ng */
            cursor: pointer; /* Th√™m con tr·ªè tay khi di chu·ªôt qua */
        }
        
        th:hover {
            background-color: #333; /* M√†u n·ªÅn khi di chu·ªôt qua */
        }

        /* Modal styles */
        .modal {
            display: none; /* ·∫®n modal m·∫∑c ƒë·ªãnh */
            position: fixed; /* V·ªã tr√≠ c·ªë ƒë·ªãnh */
            z-index: 1; /* Hi·ªÉn th·ªã tr√™n c√°c ph·∫ßn t·ª≠ kh√°c */
            left: 0;
            top: 0;
            width: 100%; /* Chi·ªÅu r·ªông ƒë·∫ßy ƒë·ªß */
            height: 100%; /* Chi·ªÅu cao ƒë·∫ßy ƒë·ªß */
            overflow: auto; /* Cho ph√©p cu·ªôn n·∫øu c·∫ßn */
            background-color: rgba(0,0,0,0.7); /* N·ªÅn t·ªëi m·ªù */
        }

        .modal-content {
            background-color: #1a1a1a; /* M√†u n·ªÅn c·ªßa modal */
            margin: 15% auto; /* CƒÉn gi·ªØa modal */
            padding: 20px;
            border: 1px solid red;
            border-radius: 5px;
            width: 300px; /* Chi·ªÅu r·ªông c·ªßa modal */
        }

        .close {
            color: red;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: darkred;
        }

        .form-group {
            margin-bottom: 15px;
            position: relative; /* ƒê·ªÉ ƒë·ªãnh v·ªã c·∫£nh b√°o */
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            text-align: left;
        }

        .form-group input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        /* C·∫£nh b√°o */
        .warning {
            border: 1px solid red !important;
            animation: shake 0.3s ease-in-out; /* Thay ƒë·ªïi th·ªùi gian v√† lo·∫°i b·ªè infinite */
        }

        .warning-icon {
            position: absolute;
            right: 10px;
            top: 35px;
            color: red;
            font-size: 20px;
            font-weight: bold;
        }

        /* Hi·ªáu ·ª©ng n√¢ng l√™n h·∫° xu·ªëng */
        @keyframes shake {
            0%, 100% {
                transform: translateY(0);
            }
            25% {
                transform: translateY(-3px);
            }
            75% {
                transform: translateY(3px);
            }
        }

        /* T√πy ch·ªânh thanh cu·ªôn */
        ::-webkit-scrollbar {
            width: 8px; /* ƒê·ªô r·ªông c·ªßa thanh cu·ªôn */
        }
        ::-webkit-scrollbar-thumb {
            background: red; /* M√†u c·ªßa thanh cu·ªôn */
            border-radius: 10px; /* Bo tr√≤n c√°c g√≥c */
        }
        ::-webkit-scrollbar-track {
            background: #1a1a1a; /* M√†u n·ªÅn c·ªßa thanh cu·ªôn */
        }
        
        /* Ki·ªÉu d√°ng cho h√†ng ƒë∆∞·ª£c ch·ªçn */
        tr.selected {
            background-color: rgba(255, 0, 0, 0.2); /* M√†u ƒë·ªè v·ªõi ƒë·ªô trong su·ªët */
        }
        
        /* Ki·ªÉu d√°ng khi hover qua h√†ng */
        tbody tr:hover {
            background-color: rgba(255, 0, 0, 0.1); /* M√†u ƒë·ªè nh·∫°t khi hover */
            cursor: pointer; /* ƒê·ªïi con tr·ªè th√†nh b√†n tay */
        }
        
        /* Ki·ªÉu d√°ng cho menu ng·ªØ c·∫£nh */
        .context-menu {
            display: none;
            position: absolute;
            background-color: #1a1a1a;
            border: 1px solid red;
            border-radius: 5px;
            padding: 5px 0;
            min-width: 150px;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .context-menu-item {
            padding: 8px 15px;
            cursor: pointer;
            color: white;
        }
        
        .context-menu-item:hover {
            background-color: rgba(255, 0, 0, 0.2);
        }
        
        /* Ki·ªÉu d√°ng cho bi·ªÉu t∆∞·ª£ng m·∫Øt */
        .eye-icon {
            cursor: pointer;
            margin-left: 5px;
            color: white;
            font-size: 16px;
        }
        
        /* Ki·ªÉu d√°ng cho m·∫≠t kh·∫©u v√† MAC b·ªã ·∫©n */
        .masked-text {
            font-family: monospace;
        }

        /* Ki·ªÉu d√°ng cho tr·∫°ng th√°i online/offline */
        .online-status {
            color: #4CAF50;
            font-weight: bold;
            background-color: rgba(76, 175, 80, 0.1);
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        .offline-status {
            color: #F44336;
            font-weight: bold;
            background-color: rgba(244, 67, 54, 0.1);
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
        }
    </style>
    <script src="md5.js"></script>
    <script src="ip_storage.js"></script>
    <script>
        // M·∫£ng l∆∞u tr·ªØ danh s√°ch ng∆∞·ªùi d√πng cho t·ª´ng h·ªá ƒëi·ªÅu h√†nh
        let usersWindows = [];
        let usersMacOS = [];
        let usersAndroid = [];
        let usersIOS = [];

        // Bi·∫øn l∆∞u tr·ªØ tr·∫°ng th√°i ƒëƒÉng nh·∫≠p admin
        let isAdminLoggedIn = false;

        // Bi·∫øn l∆∞u tr·ªØ tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
        let isLoggedIn = false;

        // Bi·∫øn l∆∞u tr·ªØ ng∆∞·ªùi d√πng ƒë∆∞·ª£c ch·ªçn
        let selectedUser = null;

        // Bi·∫øn ƒë·ªÉ theo d√µi tr·∫°ng th√°i ·∫©n/hi·ªán c·ªßa m·∫≠t kh·∫©u v√† MAC
        let showPassword = false;
        let showIP = false;

        // Bi·∫øn ƒë·ªÉ theo d√µi h∆∞·ªõng s·∫Øp x·∫øp
        let sortDirection = Array(6).fill(true); // true = tƒÉng d·∫ßn, false = gi·∫£m d·∫ßn

        // Bi·∫øn l∆∞u tr·ªØ h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i
        let currentOS = 'Windows';

        // Bi·∫øn ƒë·ªÉ theo d√µi phi√™n b·∫£n d·ªØ li·ªáu
        let dataVersion = 0;

        // H√†m ƒë·ªìng b·ªô d·ªØ li·ªáu ng∆∞·ªùi d√πng v·ªõi API server theo h·ªá ƒëi·ªÅu h√†nh c·ª• th·ªÉ
        function syncDataWithServer(osType = null) {
            // TƒÉng phi√™n b·∫£n d·ªØ li·ªáu
            if (typeof window.dataVersion === 'undefined') {
                window.dataVersion = 1;
            } else {
                window.dataVersion++;
            }
            
            // N·∫øu kh√¥ng ch·ªâ ƒë·ªãnh h·ªá ƒëi·ªÅu h√†nh, ƒë·ªìng b·ªô t·∫•t c·∫£
            let userData = {};
            
            if (osType) {
                // ƒê·ªìng b·ªô ch·ªâ m·ªôt h·ªá ƒëi·ªÅu h√†nh c·ª• th·ªÉ
                switch (osType) {
                case 'Windows':
                        userData = {
                            usersWindows: usersWindows,
                            version: window.dataVersion
                        };
                    break;
                case 'MacOS':
                        userData = {
                            usersMacOS: usersMacOS,
                            version: window.dataVersion
                        };
                    break;
                case 'Android':
                        userData = {
                            usersAndroid: usersAndroid,
                            version: window.dataVersion
                        };
                    break;
                case 'IOS':
                        userData = {
                            usersIOS: usersIOS,
                            version: window.dataVersion
                        };
                    break;
                    default:
                        // N·∫øu kh√¥ng kh·ªõp v·ªõi b·∫•t k·ª≥ h·ªá ƒëi·ªÅu h√†nh n√†o, ƒë·ªìng b·ªô t·∫•t c·∫£
                        userData = {
                            usersWindows: usersWindows,
                            usersMacOS: usersMacOS,
                            usersAndroid: usersAndroid,
                            usersIOS: usersIOS,
                            version: window.dataVersion
                        };
                }
            } else {
                // ƒê·ªìng b·ªô t·∫•t c·∫£ h·ªá ƒëi·ªÅu h√†nh
                userData = {
                    usersWindows: usersWindows,
                    usersMacOS: usersMacOS,
                    usersAndroid: usersAndroid,
                    usersIOS: usersIOS,
                    version: window.dataVersion
                };
            }
            
            console.log(`ƒêang ƒë·ªìng b·ªô d·ªØ li·ªáu ${osType || 't·∫•t c·∫£'} v·ªõi server...`);
            
            fetch('/sync_data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('L·ªói k·∫øt n·ªëi: ' + response.status);
                }
                return response.json();
            })
            .then(data => {
                console.log(`ƒê·ªìng b·ªô d·ªØ li·ªáu ${osType || 't·∫•t c·∫£'} th√†nh c√¥ng:`, data);
                showNotification(`ƒê·ªìng b·ªô d·ªØ li·ªáu ${osType || 't·∫•t c·∫£'} th√†nh c√¥ng!`, 'success');
                
                // Ki·ªÉm tra tr·∫°ng th√°i ƒë·ªìng b·ªô
                checkSyncStatus();
            })
            .catch(error => {
                console.error(`L·ªói khi ƒë·ªìng b·ªô d·ªØ li·ªáu ${osType || 't·∫•t c·∫£'}:`, error);
                showNotification(`L·ªói khi ƒë·ªìng b·ªô d·ªØ li·ªáu ${osType || 't·∫•t c·∫£'}: ` + error.message, 'error');
            });
        }

        // H√†m hi·ªÉn th·ªã th√¥ng b√°o
        function showNotification(message, type = 'info') {
            // Ki·ªÉm tra xem ƒë√£ c√≥ ph·∫ßn t·ª≠ th√¥ng b√°o ch∆∞a
            let notification = document.getElementById('sync-notification');
            if (!notification) {
                // T·∫°o ph·∫ßn t·ª≠ th√¥ng b√°o n·∫øu ch∆∞a c√≥
                notification = document.createElement('div');
                notification.id = 'sync-notification';
                notification.style.position = 'fixed';
                notification.style.bottom = '20px';
                notification.style.right = '20px';
                notification.style.padding = '10px 20px';
                notification.style.borderRadius = '5px';
                notification.style.zIndex = '9999';
                notification.style.transition = 'opacity 0.5s';
                document.body.appendChild(notification);
            }
            
            // Thi·∫øt l·∫≠p ki·ªÉu th√¥ng b√°o
            if (type === 'success') {
                notification.style.backgroundColor = '#4CAF50';
                notification.style.color = 'white';
            } else if (type === 'error') {
                notification.style.backgroundColor = '#F44336';
                notification.style.color = 'white';
            } else {
                notification.style.backgroundColor = '#2196F3';
                notification.style.color = 'white';
            }
            
            // Hi·ªÉn th·ªã th√¥ng b√°o
            notification.textContent = message;
            notification.style.opacity = '1';
            
            // ·∫®n th√¥ng b√°o sau 3 gi√¢y
            setTimeout(() => {
                notification.style.opacity = '0';
            }, 3000);
        }

        // H√†m ki·ªÉm tra tr·∫°ng th√°i ƒë·ªìng b·ªô
        function checkSyncStatus() {
            fetch('/sync_status')
            .then(response => response.json())
            .then(data => {
                console.log('Tr·∫°ng th√°i ƒë·ªìng b·ªô:', data);
            })
            .catch(error => {
                console.error('L·ªói khi ki·ªÉm tra tr·∫°ng th√°i ƒë·ªìng b·ªô:', error);
            });
        }

        // H√†m ƒë·ªìng b·ªô d·ªØ li·ªáu an to√†n (kh√¥ng t·∫£i l·∫°i trang)
        function syncDataWithServerSafe() {
            // TƒÉng phi√™n b·∫£n d·ªØ li·ªáu
            if (typeof dataVersion === 'undefined') {
                window.dataVersion = 1;
            } else {
                window.dataVersion++;
            }
            
            const userData = {
                usersWindows: usersWindows,
                usersMacOS: usersMacOS,
                usersAndroid: usersAndroid,
                usersIOS: usersIOS,
                version: window.dataVersion
            };
            
            console.log('ƒêang ƒë·ªìng b·ªô d·ªØ li·ªáu v·ªõi server (an to√†n)...');
            
            fetch('/sync_data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(userData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('L·ªói k·∫øt n·ªëi: ' + response.status);
                }
                return response.json();
            })
            .then(data => {
                console.log('ƒê·ªìng b·ªô d·ªØ li·ªáu th√†nh c√¥ng:', data);
                showNotification('ƒê·ªìng b·ªô d·ªØ li·ªáu th√†nh c√¥ng!', 'success');
            })
            .catch(error => {
                console.error('L·ªói khi ƒë·ªìng b·ªô d·ªØ li·ªáu:', error);
                showNotification('L·ªói khi ƒë·ªìng b·ªô d·ªØ li·ªáu: ' + error.message, 'error');
            });
        }

        // C·∫≠p nh·∫≠t h√†m saveUsersToLocalStorage ƒë·ªÉ kh√¥ng t·ª± ƒë·ªông ƒë·ªìng b·ªô
        function saveUsersToLocalStorage() {
            localStorage.setItem('keyAuthUsersWindows', JSON.stringify(usersWindows));
            localStorage.setItem('keyAuthUsersMacOS', JSON.stringify(usersMacOS));
            localStorage.setItem('keyAuthUsersAndroid', JSON.stringify(usersAndroid));
            localStorage.setItem('keyAuthUsersIOS', JSON.stringify(usersIOS));
            
            // Kh√¥ng g·ªçi syncDataWithServer() ·ªü ƒë√¢y ƒë·ªÉ tr√°nh ƒë·ªìng b·ªô t·ª± ƒë·ªông
            // Thay v√†o ƒë√≥, ch√∫ng ta s·∫Ω g·ªçi syncDataWithServerSafe() khi c·∫ßn thi·∫øt
        }

        // ƒê·ªìng b·ªô d·ªØ li·ªáu khi trang ƒë∆∞·ª£c t·∫£i
        window.onload = function() {
            // ƒê·ªçc danh s√°ch ng∆∞·ªùi d√πng t·ª´ localStorage
            loadUsersFromLocalStorage();
            
            // Hi·ªÉn th·ªã n·ªôi dung Windows m·∫∑c ƒë·ªãnh khi t·∫£i trang
            showContent('Windows');
            
            // C·∫≠p nh·∫≠t b·∫£ng sau khi t·∫£i d·ªØ li·ªáu
            updateTable();
            
            // Th√™m s·ª± ki·ªán Enter cho c√°c tr∆∞·ªùng nh·∫≠p li·ªáu
            const nameUserInput = document.getElementById('nameUser');
            const accountInput = document.getElementById('account');
            const passwordInput = document.getElementById('password');
            const limitedInput = document.getElementById('limited');
            
            if (nameUserInput) nameUserInput.addEventListener('keypress', handleEnterKey);
            if (accountInput) accountInput.addEventListener('keypress', handleEnterKey);
            if (passwordInput) passwordInput.addEventListener('keypress', handleEnterKey);
            if (limitedInput) limitedInput.addEventListener('keypress', handleEnterKey);
            
            // Th√™m s·ª± ki·ªán Escape ƒë·ªÉ ƒë√≥ng menu ng·ªØ c·∫£nh
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    hideContextMenu();
                }
            });
            
            // Th√™m s·ª± ki·ªán Enter cho √¥ t√¨m ki·∫øm
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        searchUsers();
                    }
                });
            }
            
            // Th√™m n√∫t ƒë·ªìng b·ªô
            addSyncButton();
            
            // Hi·ªÉn th·ªã ƒë·ªãa ch·ªâ IP
            displayUserIP();
            
            // T·∫£i d·ªØ li·ªáu ng∆∞·ªùi d√πng t·ª´ server (kh√¥ng t·ª± ƒë·ªông ƒë·ªìng b·ªô)
            fetchUserData();
        };

        // H√†m t√¨m ki·∫øm ng∆∞·ªùi d√πng
        function searchUsers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const userTableBody = document.getElementById('userTableBody');
            
            if (!searchTerm.trim()) {
                // N·∫øu kh√¥ng c√≥ t·ª´ kh√≥a t√¨m ki·∫øm, hi·ªÉn th·ªã t·∫•t c·∫£ ng∆∞·ªùi d√πng
                updateTable();
                return;
            }
            
            // L·ªçc ng∆∞·ªùi d√πng theo t·ª´ kh√≥a t√¨m ki·∫øm
            let currentUsers = [];
            switch (currentOS) {
                case 'Windows':
                    currentUsers = usersWindows;
                    break;
                case 'MacOS':
                    currentUsers = usersMacOS;
                    break;
                case 'Android':
                    currentUsers = usersAndroid;
                    break;
                case 'IOS':
                    currentUsers = usersIOS;
                    break;
            }
            const filteredUsers = currentUsers.filter(user => 
                user.name.toLowerCase().includes(searchTerm) || 
                user.account.toLowerCase().includes(searchTerm) || 
                user.status.toLowerCase().includes(searchTerm) ||
                user.limited.toLowerCase().includes(searchTerm) ||
                (user.mac && user.mac.toLowerCase().includes(searchTerm)) ||
                (user.gps_info && user.gps_info.address && user.gps_info.address.toLowerCase().includes(searchTerm)) ||
                (user.wifi_name && user.wifi_name.toLowerCase().includes(searchTerm)) ||
                (user.online_status && user.online_status.toLowerCase().includes(searchTerm))
            );
            
            // T·∫°o c√°c h√†ng cho b·∫£ng v·ªõi ng∆∞·ªùi d√πng ƒë√£ l·ªçc
            const fragment = document.createDocumentFragment();
            filteredUsers.forEach(user => {
                // X√°c ƒë·ªãnh gi√° tr·ªã hi·ªÉn th·ªã cho m·∫≠t kh·∫©u v√† GPS
                const displayPassword = showPassword ? user.password : maskPassword(user.password);
                const displayIP = showIP ? (user.ip || '') : maskIP(user.ip);
                
                // L·∫•y th√¥ng tin GPS v√† WiFi
                const gpsInfo = user.gps_info || {};
                const gpsCoords = gpsInfo.y && gpsInfo.x ? `${gpsInfo.y}, ${gpsInfo.x}` : 'Kh√¥ng c√≥';
                const gpsAddress = gpsInfo.address || 'Kh√¥ng c√≥';
                const wifiName = user.wifi_name || 'Kh√¥ng x√°c ƒë·ªãnh';
                
                // L·∫•y tr·∫°ng th√°i online
                const onlineStatus = user.online_status || 'Offline';
                const statusClass = onlineStatus === 'Online' ? 'online-status' : 'offline-status';
                
                const newRow = document.createElement('tr');
                newRow.setAttribute('onclick', 'selectRow(this)');
                newRow.setAttribute('oncontextmenu', 'showContextMenu(event, this); return false;');
                newRow.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email || ''}</td>
                    <td>${user.account}</td>
                    <td class="masked-text">${displayPassword}</td>
                    <td>${user.limited}</td>
                    <td>${user.status}</td>
                    <td class="masked-text">${gpsCoords}</td>
                    <td>${gpsAddress}</td>
                    <td>${wifiName}</td>
                    <td><span class="${statusClass}">${onlineStatus}</span></td>
                `;
                fragment.appendChild(newRow);
            });
            
            userTableBody.innerHTML = '';
            userTableBody.appendChild(fragment);
        }

        // H√†m s·∫Øp x·∫øp b·∫£ng
        function sortTable(columnIndex) {
            // ƒê·∫£o ng∆∞·ª£c h∆∞·ªõng s·∫Øp x·∫øp cho c·ªôt ƒë∆∞·ª£c ch·ªçn
            sortDirection[columnIndex] = !sortDirection[columnIndex];
            
            // S·∫Øp x·∫øp m·∫£ng users
            let currentUsers = [];
            switch (currentOS) {
                case 'Windows':
                    currentUsers = usersWindows;
                    break;
                case 'MacOS':
                    currentUsers = usersMacOS;
                    break;
                case 'Android':
                    currentUsers = usersAndroid;
                    break;
                case 'IOS':
                    currentUsers = usersIOS;
                    break;
            }
            currentUsers.sort((a, b) => {
                let valueA, valueB;
                
                // L·∫•y gi√° tr·ªã d·ª±a tr√™n ch·ªâ s·ªë c·ªôt
                switch(columnIndex) {
                    case 0: // Name
                        valueA = a.name;
                        valueB = b.name;
                        break;
                    case 1: // Email
                        valueA = a.email;
                        valueB = b.email;
                        break;
                    case 2: // Account
                        valueA = a.account;
                        valueB = b.account;
                        break;
                    case 4: // Limited
                        valueA = a.limited;
                        valueB = b.limited;
                        break;
                    case 5: // Status
                        valueA = a.status;
                        valueB = b.status;
                        break;
                    case 9: // Online Status
                        valueA = a.online_status || 'Offline';
                        valueB = b.online_status || 'Offline';
                        break;
                    default:
                        return 0; // Kh√¥ng s·∫Øp x·∫øp c√°c c·ªôt kh√°c
                }
                
                // So s√°nh c√°c gi√° tr·ªã
                if (valueA < valueB) {
                    return sortDirection[columnIndex] ? -1 : 1;
                }
                if (valueA > valueB) {
                    return sortDirection[columnIndex] ? 1 : -1;
                }
                return 0;
            });
            
            // C·∫≠p nh·∫≠t b·∫£ng
            updateTable();
            
            // L∆∞u tr·∫°ng th√°i s·∫Øp x·∫øp v√†o localStorage
            saveUsersToLocalStorage();
        }

        // H√†m hi·ªÉn th·ªã menu ng·ªØ c·∫£nh
        function showContextMenu(event, row) {
            // NgƒÉn ch·∫∑n menu ng·ªØ c·∫£nh m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát
            event.preventDefault();
            
            // Ch·ªçn h√†ng tr∆∞·ªõc khi hi·ªÉn th·ªã menu
            selectRow(row);
            
            // L·∫•y menu ng·ªØ c·∫£nh
            const contextMenu = document.getElementById('contextMenu');
            
            // ƒê·∫∑t v·ªã tr√≠ c·ªßa menu ng·ªØ c·∫£nh
            contextMenu.style.left = event.pageX + 'px';
            contextMenu.style.top = event.pageY + 'px';
            
            // Hi·ªÉn th·ªã menu ng·ªØ c·∫£nh
            contextMenu.style.display = 'block';
            
            // Th√™m s·ª± ki·ªán click v√†o document ƒë·ªÉ ƒë√≥ng menu khi click ra ngo√†i
            document.addEventListener('click', hideContextMenu);
        }
        
        // H√†m ·∫©n menu ng·ªØ c·∫£nh
        function hideContextMenu() {
            document.getElementById('contextMenu').style.display = 'none';
            document.removeEventListener('click', hideContextMenu);
        }
        
        // H√†m reset ng∆∞·ªùi d√πng ƒë√£ ch·ªçn t·ª´ menu ng·ªØ c·∫£nh
        function resetSelectedUser() {
            if (selectedUser) {
                const userIndex = usersWindows.findIndex(user => user.name === selectedUser.name) ||
                                 usersMacOS.findIndex(user => user.name === selectedUser.name) ||
                                 usersAndroid.findIndex(user => user.name === selectedUser.name) ||
                                 usersIOS.findIndex(user => user.name === selectedUser.name);
                if (userIndex !== -1) {
                    if (currentOS === 'Windows') {
                        usersWindows[userIndex].status = 'Reset';
                    } else if (currentOS === 'MacOS') {
                        usersMacOS[userIndex].status = 'Reset';
                    } else if (currentOS === 'Android') {
                        usersAndroid[userIndex].status = 'Reset';
                    } else if (currentOS === 'IOS') {
                        usersIOS[userIndex].status = 'Reset';
                    }
                    saveUsersToLocalStorage();
                    updateTable(); // C·∫≠p nh·∫≠t l·∫°i b·∫£ng
                    selectedUser = null; // X√≥a ng∆∞·ªùi d√πng ƒë√£ ch·ªçn
                }
            }
            hideContextMenu();
        }
        
        // H√†m x√≥a ng∆∞·ªùi d√πng ƒë√£ ch·ªçn t·ª´ menu ng·ªØ c·∫£nh
        function deleteSelectedUser() {
            if (selectedUser) {
                const userIndex = usersWindows.findIndex(user => user.name === selectedUser.name) ||
                                 usersMacOS.findIndex(user => user.name === selectedUser.name) ||
                                 usersAndroid.findIndex(user => user.name === selectedUser.name) ||
                                 usersIOS.findIndex(user => user.name === selectedUser.name);
                if (userIndex !== -1) {
                    if (currentOS === 'Windows') {
                        usersWindows.splice(userIndex, 1);
                    } else if (currentOS === 'MacOS') {
                        usersMacOS.splice(userIndex, 1);
                    } else if (currentOS === 'Android') {
                        usersAndroid.splice(userIndex, 1);
                    } else if (currentOS === 'IOS') {
                        usersIOS.splice(userIndex, 1);
                    }
                    saveUsersToLocalStorage();
                    updateTable(); // C·∫≠p nh·∫≠t l·∫°i b·∫£ng
                    selectedUser = null; // X√≥a ng∆∞·ªùi d√πng ƒë√£ ch·ªçn
                }
            }
            hideContextMenu();
        }
        
        // H√†m ch·ªânh s·ª≠a ng∆∞·ªùi d√πng ƒë√£ ch·ªçn
        function editSelectedUser() {
            if (!selectedUser) {
                return;
            }
            
            // T·∫°o modal ch·ªânh s·ª≠a n·∫øu ch∆∞a t·ªìn t·∫°i
            if (!document.getElementById('editUserModal')) {
                const modalHTML = `
                <div id="editUserModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeModal('editUserModal')">&times;</span>
                        <h2 style="color: red; text-align: center;">Edit User</h2>
                        <div class="form-group">
                            <label for="editNameUser">Name User:</label>
                            <input type="text" id="editNameUser" placeholder="Enter name" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="editAccount">Account:</label>
                            <input type="text" id="editAccount" placeholder="Enter account" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="editPassword">Password:</label>
                            <input type="text" id="editPassword" placeholder="Enter password" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="editLimited">Limited (days):</label>
                            <div style="display: flex; align-items: center;">
                                <input type="number" id="editLimited" placeholder="Enter days or 0 for unlimited" autocomplete="off" style="flex: 1; margin-right: 5px;" min="0">
                                <span style="color: white;">day(s)</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editStatus">Status:</label>
                            <select id="editStatus" style="width: 100%; padding: 8px; box-sizing: border-box; border-radius: 5px; border: 1px solid #ccc;">
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                                <option value="Reset">Reset</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editIP">IP Address:</label>
                            <input type="text" id="editIP" placeholder="Enter IP address" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="editGPSCoords">GPS Coordinates (y, x):</label>
                            <input type="text" id="editGPSCoords" placeholder="Enter GPS coordinates" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="editGPSAddress">GPS Address:</label>
                            <input type="text" id="editGPSAddress" placeholder="Enter GPS address" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="editWiFi">WiFi Name:</label>
                            <input type="text" id="editWiFi" placeholder="Enter WiFi name" autocomplete="off">
                        </div>
                        <div class="form-group">
                            <label for="editOnlineStatus">Online Status:</label>
                            <select id="editOnlineStatus" style="width: 100%; padding: 8px; box-sizing: border-box; border-radius: 5px; border: 1px solid #ccc;">
                                <option value="Online">Online</option>
                                <option value="Offline">Offline</option>
                            </select>
                        </div>
                        <button onclick="saveEditUser()">Save Changes</button>
                    </div>
                </div>
                `;
                
                // Th√™m modal v√†o body
                document.body.insertAdjacentHTML('beforeend', modalHTML);
            }
            
            // ƒêi·ªÅn th√¥ng tin ng∆∞·ªùi d√πng v√†o form
            document.getElementById('editNameUser').value = selectedUser.name;
            document.getElementById('editAccount').value = selectedUser.account;
            document.getElementById('editPassword').value = selectedUser.password;
            document.getElementById('editIP').value = selectedUser.ip || '';
            
            // X·ª≠ l√Ω gi√° tr·ªã limited
            let limitedValue = selectedUser.limited;
            if (limitedValue === 'Unlimited') {
                document.getElementById('editLimited').value = '0';
            } else {
                // Tr√≠ch xu·∫•t s·ªë t·ª´ chu·ªói (v√≠ d·ª•: "30 days" -> 30)
                const match = limitedValue.match(/(\d+)/);
                document.getElementById('editLimited').value = match ? match[0] : '';
            }
            
            document.getElementById('editStatus').value = selectedUser.status;
            
            // ƒêi·ªÅn th√¥ng tin GPS v√† WiFi
            const gpsInfo = selectedUser.gps_info || {};
            if (gpsInfo.y && gpsInfo.x) {
                document.getElementById('editGPSCoords').value = `${gpsInfo.y}, ${gpsInfo.x}`;
            } else {
                document.getElementById('editGPSCoords').value = '';
            }
            document.getElementById('editGPSAddress').value = gpsInfo.address || '';
            document.getElementById('editWiFi').value = selectedUser.wifi_name || '';
            document.getElementById('editOnlineStatus').value = selectedUser.online_status || 'Offline';
            
            // Hi·ªÉn th·ªã modal
            document.getElementById('editUserModal').style.display = 'block';
            
            // ƒê√≥ng menu ng·ªØ c·∫£nh
            hideContextMenu();
        }
        
        // H√†m l∆∞u th√¥ng tin ng∆∞·ªùi d√πng sau khi ch·ªânh s·ª≠a
        function saveEditUser() {
            const editNameUser = document.getElementById('editNameUser').value;
            const editAccount = document.getElementById('editAccount').value;
            const editPassword = document.getElementById('editPassword').value;
            let editLimitedValue = document.getElementById('editLimited').value;
            const editStatus = document.getElementById('editStatus').value;
            const editIP = document.getElementById('editIP').value;
            const editGPSCoords = document.getElementById('editGPSCoords').value;
            const editGPSAddress = document.getElementById('editGPSAddress').value;
            const editWiFi = document.getElementById('editWiFi').value;
            const editOnlineStatus = document.getElementById('editOnlineStatus').value;
            
            // Ki·ªÉm tra c√°c tr∆∞·ªùng b·∫Øt bu·ªôc
            if (!editNameUser.trim() || !editAccount.trim() || !editPassword.trim()) {
                alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin");
                return;
            }
            
            // X·ª≠ l√Ω gi√° tr·ªã limited
            if (!editLimitedValue || editLimitedValue === '0') {
                editLimitedValue = 'Unlimited';
            } else {
                // S·ª≠ d·ª•ng "day" cho 1 ng√†y v√† "days" cho nhi·ªÅu ng√†y
                const days = parseInt(editLimitedValue);
                editLimitedValue = days + (days === 1 ? ' day' : ' days');
            }
            
            // X·ª≠ l√Ω t·ªça ƒë·ªô GPS
            let gpsX = '', gpsY = '';
            if (editGPSCoords) {
                const coordParts = editGPSCoords.split(',');
                if (coordParts.length === 2) {
                    gpsY = coordParts[0].trim();
                    gpsX = coordParts[1].trim();
                }
            }
            
            // T√¨m v√† c·∫≠p nh·∫≠t ng∆∞·ªùi d√πng trong m·∫£ng
            let userArray;
            switch (currentOS) {
                case 'Windows':
                    userArray = usersWindows;
                    break;
                case 'MacOS':
                    userArray = usersMacOS;
                    break;
                case 'Android':
                    userArray = usersAndroid;
                    break;
                case 'IOS':
                    userArray = usersIOS;
                    break;
                default:
                    userArray = [];
            }
            
            const userIndex = userArray.findIndex(user => user.name === selectedUser.name);
            if (userIndex !== -1) {
                userArray[userIndex] = {
                    ...userArray[userIndex],
                    name: editNameUser,
                    account: editAccount,
                    password: editPassword,
                    limited: editLimitedValue,
                    status: editStatus,
                    ip: editIP,
                    gps_info: {
                        x: gpsX,
                        y: gpsY,
                        address: editGPSAddress || 'Kh√¥ng c√≥'
                    },
                    wifi_name: editWiFi || 'Kh√¥ng x√°c ƒë·ªãnh',
                    online_status: editOnlineStatus
                };
                
                // C·∫≠p nh·∫≠t selectedUser
                selectedUser = userArray[userIndex];
                
                // L∆∞u v√†o localStorage
                saveUsersToLocalStorage();
                
                // C·∫≠p nh·∫≠t giao di·ªán
                updateTable();
                
                // ƒê·ªìng b·ªô ch·ªâ h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i
                syncDataWithServer(currentOS);
                
                // ƒê√≥ng modal
                closeModal('editUserModal');
            }
        }
        
        // H√†m chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i ·∫©n/hi·ªán c·ªßa m·∫≠t kh·∫©u
        function togglePasswordVisibility(event) {
            // ƒê·∫£o ng∆∞·ª£c tr·∫°ng th√°i hi·ªÉn th·ªã m·∫≠t kh·∫©u
            showPassword = !showPassword;
            
            // C·∫≠p nh·∫≠t l·∫°i b·∫£ng
            updateTable();
        }
        
        // H√†m chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i ·∫©n/hi·ªán c·ªßa IP
        function toggleIPVisibility(event) {
            // ƒê·∫£o ng∆∞·ª£c tr·∫°ng th√°i hi·ªÉn th·ªã IP
            showIP = !showIP;
            
            // C·∫≠p nh·∫≠t l·∫°i b·∫£ng
            updateTable();
        }
        
        // H√†m t·∫°o chu·ªói ·∫©n cho m·∫≠t kh·∫©u
        function maskPassword(password) {
            return password; // Hi·ªÉn th·ªã m·∫≠t kh·∫©u ƒë·∫ßy ƒë·ªß
        }
        
        // H√†m t·∫°o chu·ªói ·∫©n cho IP
        function maskIP(ip) {
            return ip; // Hi·ªÉn th·ªã IP ƒë·∫ßy ƒë·ªß
        }

        // C·∫≠p nh·∫≠t h√†m authenticateUser ƒë·ªÉ x·ª≠ l√Ω ƒë√∫ng ph·∫£n h·ªìi t·ª´ API x√°c th·ª±c
        function authenticateUser() {
            const username = document.querySelector('input[placeholder="Admin Account"]').value;
            const password = document.querySelector('input[placeholder="Admin Password"]').value;

            // ƒê·ªìng b·ªô d·ªØ li·ªáu tr∆∞·ªõc khi x√°c th·ª±c (ch·ªâ ƒë·ªìng b·ªô h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i)
            syncDataWithServer(currentOS);
            
            // Sau ƒë√≥ g·ª≠i y√™u c·∫ßu x√°c th·ª±c
            setTimeout(() => {
                fetch('/authenticate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === "success") {
                    alert(data.message);
                    isLoggedIn = true;
                    
                    // Ki·ªÉm tra n·∫øu l√† admin
                    if (data.user && data.user.role === "admin") {
                        isAdminLoggedIn = true;
                        document.getElementById('adminLabel').style.display = 'block';
                    } else {
                        // N·∫øu kh√¥ng ph·∫£i admin, hi·ªÉn th·ªã th√¥ng tin ng∆∞·ªùi d√πng
                        isAdminLoggedIn = false;
                        document.getElementById('adminLabel').style.display = 'none';
                    }
                    
                    // Hi·ªÉn th·ªã m·∫≠t kh·∫©u v√† IP sau khi ƒëƒÉng nh·∫≠p
                    showPassword = true;
                    showIP = true;
                    updateTable();
                } else {
                    alert(data.message);
                }
            })
                .catch(error => {
                    console.error('Error:', error);
                    alert('L·ªói k·∫øt n·ªëi ƒë·∫øn m√°y ch·ªß. Vui l√≤ng th·ª≠ l·∫°i sau!');
                });
            }, 500); // ƒê·ª£i 500ms ƒë·ªÉ ƒë·∫£m b·∫£o ƒë·ªìng b·ªô d·ªØ li·ªáu ho√†n t·∫•t
        }

        // Th√™m n√∫t ƒë·ªìng b·ªô d·ªØ li·ªáu v√†o giao di·ªán
        function addSyncButton() {
            // Ki·ªÉm tra xem n√∫t ƒë√£ t·ªìn t·∫°i ch∆∞a
            if (document.getElementById('syncButton')) return;
            
            // T·∫°o n√∫t ƒë·ªìng b·ªô
            const syncButton = document.createElement('button');
            syncButton.id = 'syncButton';
            syncButton.textContent = 'ƒê·ªìng b·ªô d·ªØ li·ªáu';
            syncButton.onclick = function() {
                syncDataWithServer(currentOS); // Ch·ªâ ƒë·ªìng b·ªô h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i
            };
            syncButton.style.marginTop = '10px';
            syncButton.style.backgroundColor = '#4CAF50';
            syncButton.style.color = 'white';
            
            // Th√™m n√∫t v√†o sidebar
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.appendChild(syncButton);
            }
        }

        // G·ªçi h√†m th√™m n√∫t khi trang ƒë∆∞·ª£c t·∫£i
        window.addEventListener('load', addSyncButton);

        // H√†m ƒë·ªÉ l·∫•y ƒë·ªãa ch·ªâ IP t·ª´ Local Storage v√† hi·ªÉn th·ªã
        function displayUserIP() {
            const userIP = localStorage.getItem('userIP');
            if (userIP) {
                document.getElementById('userIPDisplay').textContent = `ƒê·ªãa ch·ªâ IP: ${userIP}`;
            }
        }

        // G·ªçi h√†m n√†y khi trang ƒë∆∞·ª£c t·∫£i
        window.addEventListener('load', displayUserIP);

        // H√†m ƒë·ªçc danh s√°ch ng∆∞·ªùi d√πng t·ª´ localStorage
        function loadUsersFromLocalStorage() {
            const savedUsersWindows = localStorage.getItem('keyAuthUsersWindows');
            const savedUsersMacOS = localStorage.getItem('keyAuthUsersMacOS');
            const savedUsersAndroid = localStorage.getItem('keyAuthUsersAndroid');
            const savedUsersIOS = localStorage.getItem('keyAuthUsersIOS');

            usersWindows = savedUsersWindows ? JSON.parse(savedUsersWindows) : [];
            usersMacOS = savedUsersMacOS ? JSON.parse(savedUsersMacOS) : [];
            usersAndroid = savedUsersAndroid ? JSON.parse(savedUsersAndroid) : [];
            usersIOS = savedUsersIOS ? JSON.parse(savedUsersIOS) : [];

            // Ki·ªÉm tra v√† th√™m tr∆∞·ªùng MAC n·∫øu ch∆∞a c√≥
            [usersWindows, usersMacOS, usersAndroid, usersIOS].forEach(users => {
                users.forEach(user => {
                    if (!user.mac) {
                        user.mac = generateRandomMAC();
                    }
                    
                    // C·∫≠p nh·∫≠t ƒë·ªãnh d·∫°ng limited n·∫øu c·∫ßn
                    if (user.limited && user.limited !== 'Unlimited') {
                        // Tr√≠ch xu·∫•t s·ªë t·ª´ chu·ªói (v√≠ d·ª•: "30 day" -> 30)
                        const match = user.limited.match(/(\d+)/);
                        if (match) {
                            const days = parseInt(match[0]);
                            user.limited = days + (days === 1 ? ' day' : ' days');
                        }
                    }
                });
            });

            // L∆∞u l·∫°i ƒë·ªÉ c·∫≠p nh·∫≠t d·ªØ li·ªáu
            saveUsersToLocalStorage();
        }
        
        // H√†m t·∫°o ƒë·ªãa ch·ªâ MAC ng·∫´u nhi√™n
        function generateRandomMAC() {
            const hexDigits = "0123456789ABCDEF";
            let mac = "";
            for (let i = 0; i < 6; i++) {
                if (i > 0) mac += ":";
                mac += hexDigits.charAt(Math.floor(Math.random() * 16));
                mac += hexDigits.charAt(Math.floor(Math.random() * 16));
            }
            return mac;
        }

        function showContent(content) {
            // NgƒÉn ch·∫∑n h√†nh vi m·∫∑c ƒë·ªãnh n·∫øu ƒë∆∞·ª£c g·ªçi t·ª´ s·ª± ki·ªán
            if (event) {
                event.preventDefault();
            }
            
            // C·∫≠p nh·∫≠t URL m√† kh√¥ng t·∫£i l·∫°i trang
            if (history.pushState) {
                const newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '#/' + content;
                window.history.pushState({path: newurl}, '', newurl);
            }
            
            currentOS = content;
            const contentDiv = document.querySelector('.content');
            contentDiv.innerHTML = `<h1>${content}</h1>`;
            if (content === 'Windows' || content === 'MacOS' || content === 'Android' || content === 'IOS') {
                // ƒê·ªçc danh s√°ch ng∆∞·ªùi d√πng t·ª´ localStorage khi chuy·ªÉn ƒë·ªïi panel
                loadUsersFromLocalStorage();
                
                contentDiv.innerHTML += `
                    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <button onclick="openModal('createUserModal'); return false;">Create User</button>
                            <button onclick="resetUser(); return false;">Reset User</button>
                            <button onclick="resetAllUsers(); return false;">Reset All Users</button>
                            <button onclick="deleteUser(); return false;">Delete User</button>
                            <button onclick="syncDataWithServer('${content}'); return false;" style="background-color: #4CAF50;">ƒê·ªìng B·ªô ${content}</button>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <input type="text" id="searchInput" placeholder="Search users..." style="padding: 8px; border-radius: 5px; border: 1px solid #ccc; margin-right: 5px;">
                            <button onclick="searchUsers(); return false;">Search</button>
                        </div>
                    </div>
                    <table id="userTable">
                        <thead>
                            <tr>
                                <th onclick="sortTable(0); return false;">Name User ‚Üï</th>
                                <th onclick="sortTable(1); return false;">Email ‚Üï</th>
                                <th onclick="sortTable(2); return false;">Account ‚Üï</th>
                                <th class="no-sort">
                                    Password
                                    <span class="eye-icon" onclick="togglePasswordVisibility(event); return false;">üëÅÔ∏è</span>
                                </th>
                                <th onclick="sortTable(4); return false;">Limited ‚Üï</th>
                                <th onclick="sortTable(5); return false;">Status ‚Üï</th>
                                <th class="no-sort">
                                    GPS
                                    <span class="eye-icon" onclick="toggleIPVisibility(event); return false;">üëÅÔ∏è</span>
                                </th>
                                <th>ƒê·ªãa ch·ªâ</th>
                                <th>WiFi</th>
                                <th onclick="sortTable(9); return false;">Online ‚Üï</th>
                            </tr>
                        </thead>
                        <tbody id="userTableBody">
                            ${generateTableRows()}
                        </tbody>
                    </table>
                `;
                
                // C·∫≠p nh·∫≠t b·∫£ng sau khi t·∫£i d·ªØ li·ªáu
                updateTable();
            }
            
            return false;
        }

        // H√†m t·∫°o c√°c h√†ng cho b·∫£ng
        function generateTableRows() {
            const fragment = document.createDocumentFragment();
            let currentUsers = [];
            switch (currentOS) {
                case 'Windows':
                    currentUsers = usersWindows;
                    break;
                case 'MacOS':
                    currentUsers = usersMacOS;
                    break;
                case 'Android':
                    currentUsers = usersAndroid;
                    break;
                case 'IOS':
                    currentUsers = usersIOS;
                    break;
            }
            currentUsers.forEach(user => {
                // X√°c ƒë·ªãnh gi√° tr·ªã hi·ªÉn th·ªã cho m·∫≠t kh·∫©u v√† GPS
                const displayPassword = showPassword ? user.password : maskPassword(user.password);
                const displayIP = showIP ? (user.ip || '') : maskIP(user.ip);
                
                // L·∫•y th√¥ng tin GPS v√† WiFi
                const gpsInfo = user.gps_info || {};
                const gpsCoords = gpsInfo.y && gpsInfo.x ? `${gpsInfo.y}, ${gpsInfo.x}` : 'Kh√¥ng c√≥';
                const gpsAddress = gpsInfo.address || 'Kh√¥ng c√≥';
                const wifiName = user.wifi_name || 'Kh√¥ng x√°c ƒë·ªãnh';
                
                // L·∫•y tr·∫°ng th√°i online
                const onlineStatus = user.online_status || 'Offline';
                const statusClass = onlineStatus === 'Online' ? 'online-status' : 'offline-status';
                
                const newRow = document.createElement('tr');
                newRow.setAttribute('onclick', 'selectRow(this)');
                newRow.setAttribute('oncontextmenu', 'showContextMenu(event, this); return false;');
                newRow.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.email || ''}</td>
                    <td>${user.account}</td>
                    <td class="masked-text" onclick="togglePasswordVisibility(event)">${displayPassword}</td>
                    <td>${user.limited}</td>
                    <td>${user.status}</td>
                    <td class="masked-text">${gpsCoords}</td>
                    <td>${gpsAddress}</td>
                    <td>${wifiName}</td>
                    <td><span class="${statusClass}">${onlineStatus}</span></td>
                `;
                fragment.appendChild(newRow);
            });
            return fragment;
        }

        // H√†m c·∫≠p nh·∫≠t b·∫£ng
        function updateTable() {
            const userTableBody = document.getElementById('userTableBody');
            userTableBody.innerHTML = '';
            userTableBody.appendChild(generateTableRows());
        }

        // H√†m ch·ªçn h√†ng
        function selectRow(row) {
            // X√≥a l·ªõp selected t·ª´ t·∫•t c·∫£ c√°c h√†ng
            const allRows = document.querySelectorAll('#userTableBody tr');
            allRows.forEach(r => r.classList.remove('selected'));
            
            // Th√™m l·ªõp selected v√†o h√†ng ƒë∆∞·ª£c ch·ªçn
            row.classList.add('selected');
            
            // L·∫•y th√¥ng tin ng∆∞·ªùi d√πng t·ª´ h√†ng ƒë∆∞·ª£c ch·ªçn
            const name = row.cells[0].textContent;
            const account = row.cells[2].textContent;
            const passwordCell = row.cells[3];
            const limited = row.cells[4].textContent;
            const status = row.cells[5].textContent;
            const gpsCell = row.cells[6];
            const addressCell = row.cells[7];
            const wifiCell = row.cells[8];
            const onlineCell = row.cells[9];
            
            // T√¨m ng∆∞·ªùi d√πng trong m·∫£ng d·ªØ li·ªáu
            let userArray;
            switch (currentOS) {
                case 'Windows':
                    userArray = usersWindows;
                    break;
                case 'MacOS':
                    userArray = usersMacOS;
                    break;
                case 'Android':
                    userArray = usersAndroid;
                    break;
                case 'IOS':
                    userArray = usersIOS;
                    break;
                default:
                    userArray = [];
            }
            
            const user = userArray.find(u => u.name === name && u.account === account);
            
            // L∆∞u th√¥ng tin ng∆∞·ªùi d√πng ƒë∆∞·ª£c ch·ªçn v√†o bi·∫øn to√†n c·ª•c ƒë·ªÉ s·ª≠ d·ª•ng sau n√†y
            selectedUser = user || {
                name: name,
                account: account,
                password: passwordCell.textContent,
                limited: limited,
                status: status,
                gps_info: {
                    x: gpsCell.textContent.split(',')[1]?.trim(),
                    y: gpsCell.textContent.split(',')[0]?.trim(),
                    address: addressCell.textContent
                },
                wifi_name: wifiCell.textContent,
                online_status: onlineCell.textContent.trim()
            };
            
            // Hi·ªÉn th·ªã th√¥ng tin ng∆∞·ªùi d√πng ƒë√£ ch·ªçn
            const selectedUserInfo = document.getElementById('selectedUserInfo');
            if (selectedUserInfo) {
                selectedUserInfo.style.display = 'block';
                document.getElementById('selectedName').textContent = name;
                document.getElementById('selectedAccount').textContent = account;
                document.getElementById('selectedLimited').textContent = limited;
                document.getElementById('selectedStatus').textContent = status;
            }
        }

        // H√†m th√™m ng∆∞·ªùi d√πng m·ªõi v√†o b·∫£ng
        function addUserToTable(name, email, account, password, limited) {
            // T·∫°o ƒë·ªãa ch·ªâ MAC ng·∫´u nhi√™n cho ng∆∞·ªùi d√πng m·ªõi
            const mac = generateRandomMAC();
            
            // Th√™m ng∆∞·ªùi d√πng m·ªõi v√†o ƒë·∫ßu m·∫£ng
            const newUser = {
                name: name,
                email: email || '',
                account: account,
                password: password,
                limited: limited,
                status: 'Active',
                mac: mac,
                ip: '', // Initialize IP as an empty string
                gps_info: {
                    x: '',
                    y: '',
                    address: 'Kh√¥ng c√≥'
                },
                wifi_name: 'Kh√¥ng x√°c ƒë·ªãnh',
                online_status: 'Offline'
            };
            
            console.log('Th√™m ng∆∞·ªùi d√πng m·ªõi:', newUser);
            
            // Th√™m v√†o m·∫£ng t∆∞∆°ng ·ª©ng v·ªõi h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i
            switch (currentOS) {
                case 'Windows':
                    usersWindows.unshift(newUser);
                    break;
                case 'MacOS':
                    usersMacOS.unshift(newUser);
                    break;
                case 'Android':
                    usersAndroid.unshift(newUser);
                    break;
                case 'IOS':
                    usersIOS.unshift(newUser);
                    break;
            }

            // L∆∞u danh s√°ch ng∆∞·ªùi d√πng v√†o localStorage
            localStorage.setItem('keyAuthUsersWindows', JSON.stringify(usersWindows));
            localStorage.setItem('keyAuthUsersMacOS', JSON.stringify(usersMacOS));
            localStorage.setItem('keyAuthUsersAndroid', JSON.stringify(usersAndroid));
            localStorage.setItem('keyAuthUsersIOS', JSON.stringify(usersIOS));
            
            // C·∫≠p nh·∫≠t b·∫£ng
            updateTable();
            
            // Hi·ªÉn th·ªã th√¥ng b√°o
            showNotification('ƒê√£ th√™m ng∆∞·ªùi d√πng m·ªõi: ' + name, 'success');
            
            // ƒê·ªìng b·ªô d·ªØ li·ªáu v·ªõi server sau khi th√™m ng∆∞·ªùi d√πng (ch·ªâ ƒë·ªìng b·ªô h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i)
            setTimeout(() => {
                syncDataWithServer(currentOS);
            }, 500);
        }

        // H√†m reset ng∆∞·ªùi d√πng
        function resetUser() {
            let name;
            
            if (selectedUser) {
                // N·∫øu ƒë√£ ch·ªçn ng∆∞·ªùi d√πng, s·ª≠ d·ª•ng ng∆∞·ªùi d√πng ƒë√≥
                name = selectedUser.name;
            } else {
                // N·∫øu ch∆∞a ch·ªçn ng∆∞·ªùi d√πng, hi·ªÉn th·ªã prompt ƒë·ªÉ nh·∫≠p t√™n
                name = prompt("Nh·∫≠p t√™n ng∆∞·ªùi d√πng c·∫ßn reset:");
                if (!name) return; // N·∫øu kh√¥ng nh·∫≠p t√™n, tho√°t kh·ªèi h√†m
            }
            
            const userIndex = usersWindows.findIndex(user => user.name === name) ||
                             usersMacOS.findIndex(user => user.name === name) ||
                             usersAndroid.findIndex(user => user.name === name) ||
                             usersIOS.findIndex(user => user.name === name);
            if (userIndex !== -1) {
                if (currentOS === 'Windows') {
                    usersWindows[userIndex].status = 'Reset';
                } else if (currentOS === 'MacOS') {
                    usersMacOS[userIndex].status = 'Reset';
                } else if (currentOS === 'Android') {
                    usersAndroid[userIndex].status = 'Reset';
                } else if (currentOS === 'IOS') {
                    usersIOS[userIndex].status = 'Reset';
                }
                saveUsersToLocalStorage();
                updateTable(); // C·∫≠p nh·∫≠t l·∫°i b·∫£ng
                selectedUser = null; // X√≥a ng∆∞·ªùi d√πng ƒë√£ ch·ªçn
                
                // ƒê·ªìng b·ªô ch·ªâ h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i
                syncDataWithServer(currentOS);
            } else {
                alert(`Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng: ${name}`);
            }
        }

        // H√†m reset t·∫•t c·∫£ ng∆∞·ªùi d√πng
        function resetAllUsers() {
            if (currentOS === 'Windows') {
                usersWindows.forEach(user => {
                    user.status = 'Reset';
                });
            } else if (currentOS === 'MacOS') {
                usersMacOS.forEach(user => {
                    user.status = 'Reset';
                });
            } else if (currentOS === 'Android') {
                usersAndroid.forEach(user => {
                    user.status = 'Reset';
                });
            } else if (currentOS === 'IOS') {
                usersIOS.forEach(user => {
                    user.status = 'Reset';
                });
            }
            saveUsersToLocalStorage();
            updateTable(); // C·∫≠p nh·∫≠t l·∫°i b·∫£ng
            
            // ƒê·ªìng b·ªô ch·ªâ h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i
            syncDataWithServer(currentOS);
        }

        // H√†m x√≥a ng∆∞·ªùi d√πng
        function deleteUser() {
            const name = prompt("Nh·∫≠p t√™n ng∆∞·ªùi d√πng c·∫ßn x√≥a:");
            if (name) {
                let userIndex = -1;
                if (currentOS === 'Windows') {
                    userIndex = usersWindows.findIndex(user => user.name.localeCompare(name, 'vi', { sensitivity: 'base' }) === 0);
                    if (userIndex !== -1) usersWindows.splice(userIndex, 1);
                } else if (currentOS === 'MacOS') {
                    userIndex = usersMacOS.findIndex(user => user.name.localeCompare(name, 'vi', { sensitivity: 'base' }) === 0);
                    if (userIndex !== -1) usersMacOS.splice(userIndex, 1);
                } else if (currentOS === 'Android') {
                    userIndex = usersAndroid.findIndex(user => user.name.localeCompare(name, 'vi', { sensitivity: 'base' }) === 0);
                    if (userIndex !== -1) usersAndroid.splice(userIndex, 1);
                } else if (currentOS === 'IOS') {
                    userIndex = usersIOS.findIndex(user => user.name.localeCompare(name, 'vi', { sensitivity: 'base' }) === 0);
                    if (userIndex !== -1) usersIOS.splice(userIndex, 1);
                }
                if (userIndex !== -1) {
                    saveUsersToLocalStorage();
                    updateTable(); // C·∫≠p nh·∫≠t l·∫°i b·∫£ng
                    alert(`ƒê√£ x√≥a ng∆∞·ªùi d√πng: ${name}`);
                    
                    // ƒê·ªìng b·ªô ch·ªâ h·ªá ƒëi·ªÅu h√†nh hi·ªán t·∫°i
                    syncDataWithServer(currentOS);
                } else {
                    alert(`Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng: ${name}`);
                }
            }
        }

        // H√†m m·ªü modal
        function openModal(modalId) {
            document.getElementById(modalId).style.display = "block";
            // X√≥a c·∫£nh b√°o khi m·ªü modal
            clearWarnings();
            // ƒê·∫∑t focus v√†o tr∆∞·ªùng ƒë·∫ßu ti√™n
            setTimeout(() => {
                document.getElementById('nameUser').focus();
            }, 100);
        }

        // H√†m ƒë√≥ng modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }

        // H√†m x√≥a c·∫£nh b√°o
        function clearWarnings() {
            const inputs = document.querySelectorAll('.form-group input, .form-group select');
            inputs.forEach(input => {
                input.classList.remove('warning');
                input.classList.remove('warning-border');
                const warningIcon = input.parentElement.querySelector('.warning-icon');
                if (warningIcon) {
                    warningIcon.remove();
                }
            });
        }

        // H√†m ki·ªÉm tra v√† hi·ªÉn th·ªã c·∫£nh b√°o
        function validateForm() {
            const nameUser = document.getElementById('nameUser');
            const account = document.getElementById('account');
            const password = document.getElementById('password');
            const limited = document.getElementById('limited');
            
            let isValid = true;
            clearWarnings();

            // Ki·ªÉm tra t·∫•t c·∫£ c√°c tr∆∞·ªùng v√† hi·ªÉn th·ªã c·∫£nh b√°o cho t·∫•t c·∫£ c√°c tr∆∞·ªùng thi·∫øu th√¥ng tin
            if (!nameUser.value.trim()) {
                showWarning(nameUser);
                isValid = false;
            }
            
            if (!account.value.trim()) {
                showWarning(account);
                isValid = false;
            }
            
            if (!password.value.trim()) {
                showWarning(password);
                isValid = false;
            }
            
            // Ki·ªÉm tra gi√° tr·ªã limited ph·∫£i l√† s·ªë kh√¥ng √¢m
            if (limited.value.trim() !== '' && (isNaN(limited.value) || parseInt(limited.value) < 0)) {
                showWarning(limited);
                isValid = false;
            }

            // ƒê·∫∑t focus v√†o tr∆∞·ªùng ƒë·∫ßu ti√™n thi·∫øu th√¥ng tin
            if (!nameUser.value.trim()) {
                nameUser.focus();
            } else if (!account.value.trim()) {
                account.focus();
            } else if (!password.value.trim()) {
                password.focus();
            } else if (limited.value.trim() !== '' && (isNaN(limited.value) || parseInt(limited.value) < 0)) {
                limited.focus();
            }

            return isValid;
        }

        // H√†m hi·ªÉn th·ªã c·∫£nh b√°o
        function showWarning(input) {
            input.classList.add('warning');
            const warningIcon = document.createElement('span');
            warningIcon.className = 'warning-icon';
            warningIcon.textContent = '!';
            input.parentElement.appendChild(warningIcon);
            
            // Th√™m s·ª± ki·ªán ƒë·ªÉ x√≥a animation sau khi n√≥ ho√†n th√†nh
            input.addEventListener('animationend', function() {
                input.classList.remove('warning');
                input.classList.add('warning-border'); // Gi·ªØ l·∫°i vi·ªÅn ƒë·ªè
            }, {once: true}); // {once: true} ƒë·∫£m b·∫£o s·ª± ki·ªán ch·ªâ ƒë∆∞·ª£c k√≠ch ho·∫°t m·ªôt l·∫ßn
        }

        // H√†m x·ª≠ l√Ω khi ng∆∞·ªùi d√πng nh·∫•n v√†o n√∫t Create trong modal
        function createUser() {
            // NgƒÉn ch·∫∑n h√†nh vi m·∫∑c ƒë·ªãnh
            event.preventDefault();
            
            if (validateForm()) {
                const nameUser = document.getElementById('nameUser').value;
                const email = document.getElementById('email').value;
                const account = document.getElementById('account').value;
                const password = document.getElementById('password').value;
                let limitedValue = document.getElementById('limited').value;
                
                // X·ª≠ l√Ω gi√° tr·ªã limited
                if (!limitedValue || limitedValue === '0') {
                    limitedValue = 'Unlimited';
                } else {
                    // S·ª≠ d·ª•ng "day" cho 1 ng√†y v√† "days" cho nhi·ªÅu ng√†y
                    const days = parseInt(limitedValue);
                    limitedValue = days + (days === 1 ? ' day' : ' days');
                }
                
                // Th√™m ng∆∞·ªùi d√πng m·ªõi v√†o b·∫£ng
                addUserToTable(nameUser, email, account, password, limitedValue);
                
                // X√≥a gi√° tr·ªã trong c√°c tr∆∞·ªùng nh·∫≠p li·ªáu
                document.getElementById('nameUser').value = '';
                document.getElementById('email').value = '';
                document.getElementById('account').value = '';
                document.getElementById('password').value = '';
                document.getElementById('limited').value = ''; // X√≥a gi√° tr·ªã
                
                closeModal('createUserModal');
            }
        }

        // H√†m x·ª≠ l√Ω khi ng∆∞·ªùi d√πng nh·∫•n Enter
        function handleEnterKey(event) {
            if (event.key === 'Enter') {
                createUser();
            }
        }

        // H√†m t·∫£i d·ªØ li·ªáu ng∆∞·ªùi d√πng t·ª´ server v√† c·∫≠p nh·∫≠t localStorage
        function fetchUserData() {
            // NgƒÉn ch·∫∑n h√†nh vi m·∫∑c ƒë·ªãnh n·∫øu ƒë∆∞·ª£c g·ªçi t·ª´ s·ª± ki·ªán
            if (event) {
                event.preventDefault();
            }
            
            fetch('/users')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('L·ªói k·∫øt n·ªëi: ' + response.status);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('ƒê√£ nh·∫≠n d·ªØ li·ªáu t·ª´ server:', data);
                    
                    // C·∫≠p nh·∫≠t b·∫£ng ng∆∞·ªùi d√πng v·ªõi d·ªØ li·ªáu m·ªõi nh·∫•t
                    if (data.usersWindows) usersWindows = data.usersWindows;
                    if (data.usersMacOS) usersMacOS = data.usersMacOS;
                    if (data.usersAndroid) usersAndroid = data.usersAndroid;
                    if (data.usersIOS) usersIOS = data.usersIOS;
                    
                    // L∆∞u v√†o localStorage
                    localStorage.setItem('keyAuthUsersWindows', JSON.stringify(usersWindows));
                    localStorage.setItem('keyAuthUsersMacOS', JSON.stringify(usersMacOS));
                    localStorage.setItem('keyAuthUsersAndroid', JSON.stringify(usersAndroid));
                    localStorage.setItem('keyAuthUsersIOS', JSON.stringify(usersIOS));
                    
                    // C·∫≠p nh·∫≠t b·∫£ng
                    updateTable();
                    
                    showNotification('ƒê√£ t·∫£i d·ªØ li·ªáu t·ª´ server', 'success');
                })
                .catch(error => {
                    console.error('L·ªói khi l·∫•y d·ªØ li·ªáu ng∆∞·ªùi d√πng:', error);
                    showNotification('L·ªói khi t·∫£i d·ªØ li·ªáu: ' + error.message, 'error');
                });
        }

        // S·ª≠a ƒë·ªïi c√°c form ƒë·ªÉ ngƒÉn ch·∫∑n h√†nh vi submit m·∫∑c ƒë·ªãnh
        document.addEventListener('DOMContentLoaded', function() {
            // NgƒÉn ch·∫∑n t·∫•t c·∫£ c√°c form submit
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(event) {
                    event.preventDefault();
                });
            });
        });
    </script>
</head>
<body>
    <div class="sidebar">
        <h2>KeyAuth</h2>
        <button onclick="showContent('Windows'); return false;">Windows</button>
        <button onclick="showContent('MacOS'); return false;">MacOS</button>
        <button onclick="showContent('Android'); return false;">Android</button>
        <button onclick="showContent('IOS'); return false;">IOS</button>
        <h2>Result Table</h2>
        <button onclick="showContent('MD5'); return false;">MD5</button>
        <button onclick="showContent('Normal'); return false;">Normal</button>
        <h2>Admin Login</h2>
        <input type="text" placeholder="Admin Account" autocomplete="off" style="margin-bottom: 10px; padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
        <input type="password" placeholder="Admin Password" autocomplete="off" style="margin-bottom: 10px; padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
        <button onclick="authenticateUser(); return false;">ƒêƒÉng Nh·∫≠p</button>
        <div id="adminLabel" style="display: none; color: red; margin-top: 10px;">ADMIN</div>
    </div>
    <div class="divider"></div> <!-- ƒê∆∞·ªùng k·∫ª m√†u ƒë·ªè -->
    <div class="content">
        <h1>KeyAuth</h1>
        <p>ƒê√¢y l√† m·ªôt trang web v·ªõi n·ªÅn t·ªëi v√† m√†u ch·ªØ s√°ng.</p>
        <div id="userIPDisplay"></div> <!-- Th√™m ph·∫ßn t·ª≠ ƒë·ªÉ hi·ªÉn th·ªã ƒë·ªãa ch·ªâ IP -->
    </div>

    <!-- Modal Create User -->
    <div id="createUserModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('createUserModal')">&times;</span>
            <h2 style="color: red; text-align: center;">Create User</h2>
            <div class="form-group">
                <label for="nameUser">Name User:</label>
                <input type="text" id="nameUser" placeholder="Enter name" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" placeholder="Enter email" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="account">Account:</label>
                <input type="text" id="account" placeholder="Enter account" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="text" id="password" placeholder="Enter password" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="limited">Limited (days):</label>
                <div style="display: flex; align-items: center;">
                    <input type="number" id="limited" placeholder="Enter days or 0 for unlimited" autocomplete="off" style="flex: 1; margin-right: 5px;" min="0">
                    <span style="color: white;">day(s)</span>
                </div>
            </div>
            <button onclick="createUser()">Create</button>
        </div>
    </div>
    
    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div class="context-menu-item" onclick="editSelectedUser()">Edit User</div>
        <div class="context-menu-item" onclick="resetSelectedUser()">Reset User</div>
        <div class="context-menu-item" onclick="deleteSelectedUser()">Delete User</div>
    </div>
</body>
</html> 